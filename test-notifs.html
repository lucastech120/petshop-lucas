<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Test Notifs</title>
<style>
  /* estilos en CSS puro */
  #notificaciones-container {
    position: fixed;
    top: 20px;
    right: 20px;
    display: flex;
    flex-direction: column;
    gap: 10px;
    z-index: 9999;
  }
  .toast {
    background-color: #4caf50;
    color: white;
    padding: 12px 20px;
    border-radius: 8px;
    font-size: 14px;
    opacity: 0;
    transform: translateX(100%);
    transition: transform 0.4s ease, opacity 0.4s ease;
    display: flex;
    justify-content: space-between;
    align-items: center;
    min-width: 200px;
  }
  .toast.mostrar {
    opacity: 1;
    transform: translateX(0);
  }
  .toast button {
    background: none;
    border: none;
    color: white;
    font-size: 18px;
    margin-left: 10px;
    cursor: pointer;
  }
  /* para mejor visibilidad */
  body { height:200vh; background:#222; color:#fff; display:flex; align-items:flex-start; gap:12px; padding:40px; }
  button.test { padding:8px 12px; border-radius:6px; }
</style>
</head>
<body>

<button class="test" id="btnAdd">Agregar notificación</button>
<div id="notificaciones-container"></div>

<script>
  // Función de prueba
  function mostrarNotificacion(mensaje) {
    const contenedorNotifs = document.getElementById("notificaciones-container");
    const toast = document.createElement("div");
    toast.className = "toast";
    toast.innerHTML = `<span>${mensaje}</span><button aria-label="Cerrar">×</button>`;
    contenedorNotifs.appendChild(toast);

    // animar
    requestAnimationFrame(() => toast.classList.add("mostrar"));

    // cerrar con botón
    toast.querySelector("button").addEventListener("click", () => cerrarToast(toast));

    // auto-close
    const AUTO_CLOSE_MS = 3000;
    const timer = setTimeout(() => cerrarToast(toast), AUTO_CLOSE_MS);

    function cerrarToast(el) {
      if (!el || !el.classList.contains("mostrar")) return;
      el.classList.remove("mostrar");
      setTimeout(() => {
        clearTimeout(timer);
        if (el && el.parentElement) el.parentElement.removeChild(el);
      }, 400);
    }
  }

  document.getElementById("btnAdd").addEventListener("click", () => {
    mostrarNotificacion("Producto agregado ✅ " + new Date().toLocaleTimeString());
  });

  // Exponer para pruebas desde consola
  window.mostrarNotificacion = mostrarNotificacion;
</script>
</body>
</html>
